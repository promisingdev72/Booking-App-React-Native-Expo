{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"D:\\\\Work\\\\App-Zip\\\\node_modules\\\\react-native-calendars\\\\src\\\\expandableCalendar\\\\index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport _ from 'lodash';\nimport React, { Component } from 'react';\nimport AccessibilityInfo from \"react-native-web/dist/exports/AccessibilityInfo\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport { CALENDAR_KNOB } from \"../testIDs\";\nimport dateutils from \"../dateutils\";\nimport { parseDate } from \"../interface\";\nimport styleConstructor from \"./style\";\nimport CalendarList from \"../calendar-list\";\nimport Calendar from \"../calendar\";\nimport asCalendarConsumer from \"./asCalendarConsumer\";\nimport WeekCalendar from \"./weekCalendar\";\nimport Week from \"./week\";\n\nvar commons = require(\"./commons\");\n\nvar UPDATE_SOURCES = commons.UPDATE_SOURCES;\nvar POSITIONS = {\n  CLOSED: 'closed',\n  OPEN: 'open'\n};\nvar SPEED = 20;\nvar BOUNCINESS = 6;\nvar CLOSED_HEIGHT = 120;\nvar WEEK_HEIGHT = 46;\nvar KNOB_CONTAINER_HEIGHT = 20;\nvar HEADER_HEIGHT = 68;\nvar DAY_NAMES_PADDING = 24;\n\nvar ExpandableCalendar = function (_Component) {\n  _inherits(ExpandableCalendar, _Component);\n\n  var _super = _createSuper(ExpandableCalendar);\n\n  function ExpandableCalendar(props) {\n    var _this;\n\n    _classCallCheck(this, ExpandableCalendar);\n\n    _this = _super.call(this, props);\n\n    _this.handleScreenReaderStatus = function (screenReaderEnabled) {\n      _this.setState({\n        screenReaderEnabled: screenReaderEnabled\n      });\n    };\n\n    _this.handleMoveShouldSetPanResponder = function (e, gestureState) {\n      if (_this.props.disablePan) {\n        return false;\n      }\n\n      if (!_this.props.horizontal && _this.state.position === POSITIONS.OPEN) {\n        return false;\n      }\n\n      if (_this.state.position === POSITIONS.CLOSED && gestureState.dy < 0) {\n        return false;\n      }\n\n      return gestureState.dy > 5 || gestureState.dy < -5;\n    };\n\n    _this.handlePanResponderGrant = function () {};\n\n    _this.handlePanResponderMove = function (e, gestureState) {\n      _this._wrapperStyles.style.height = Math.max(_this.closedHeight, _this._height + gestureState.dy);\n\n      if (!_this.props.horizontal) {\n        _this._headerStyles.style.top = Math.min(Math.max(-gestureState.dy, -HEADER_HEIGHT), 0);\n      } else {\n        if (_this.state.position === POSITIONS.CLOSED) {\n          _this._weekCalendarStyles.style.opacity = Math.min(1, Math.max(1 - gestureState.dy / 100, 0));\n        }\n      }\n\n      _this.updateNativeStyles();\n    };\n\n    _this.handlePanResponderEnd = function () {\n      _this._height = _this._wrapperStyles.style.height;\n\n      _this.bounceToPosition();\n    };\n\n    _this.onAnimatedFinished = function (_ref) {\n      var finished = _ref.finished;\n\n      if (finished) {}\n    };\n\n    _this.onPressArrowLeft = function () {\n      _this.scrollPage(false);\n    };\n\n    _this.onPressArrowRight = function () {\n      _this.scrollPage(true);\n    };\n\n    _this.onDayPress = function (value) {\n      _.invoke(_this.props.context, 'setDate', value.dateString, UPDATE_SOURCES.DAY_PRESS);\n\n      setTimeout(function () {\n        if (_this.state.position === POSITIONS.OPEN) {\n          _this.bounceToPosition(_this.closedHeight);\n        }\n      }, 0);\n    };\n\n    _this.onVisibleMonthsChange = function (value) {\n      if (_this.visibleMonth !== _.first(value).month) {\n        _this.visibleMonth = _.first(value).month;\n        var _this$props$context = _this.props.context,\n            date = _this$props$context.date,\n            updateSource = _this$props$context.updateSource;\n\n        if (_this.visibleMonth !== _this.getMonth(date) && updateSource !== UPDATE_SOURCES.DAY_PRESS) {\n          var next = _this.isLaterDate(_.first(value), date);\n\n          _this.scrollPage(next);\n        }\n\n        setTimeout(function () {\n          var numberOfWeeks = _this.getNumberOfWeeksInMonth(parseDate(_this.props.context.date));\n\n          if (numberOfWeeks !== _this.numberOfWeeks) {\n            _this.numberOfWeeks = numberOfWeeks;\n            _this.openHeight = _this.getOpenHeight();\n\n            if (_this.state.position === POSITIONS.OPEN) {\n              _this.bounceToPosition(_this.openHeight);\n            }\n          }\n        }, 0);\n      }\n    };\n\n    _this.renderArrow = function (direction) {\n      if (_.isFunction(_this.props.renderArrow)) {\n        return _this.props.renderArrow(direction);\n      }\n\n      return React.createElement(Image, {\n        source: direction === 'right' ? _this.props.rightArrowImageSource : _this.props.leftArrowImageSource,\n        style: _this.style.arrowImage,\n        testID: _this.props.testID + \"-\" + direction + \"-arrow\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 7\n        }\n      });\n    };\n\n    _this.style = styleConstructor(props.theme);\n    _this.closedHeight = CLOSED_HEIGHT + (props.hideKnob ? 0 : KNOB_CONTAINER_HEIGHT);\n    _this.numberOfWeeks = _this.getNumberOfWeeksInMonth(XDate(_this.props.context.date));\n    _this.openHeight = _this.getOpenHeight();\n    var startHeight = props.initialPosition === POSITIONS.CLOSED ? _this.closedHeight : _this.openHeight;\n    _this._height = startHeight;\n    _this._wrapperStyles = {\n      style: {\n        height: startHeight\n      }\n    };\n    _this._headerStyles = {\n      style: {\n        top: props.initialPosition === POSITIONS.CLOSED ? 0 : -HEADER_HEIGHT\n      }\n    };\n    _this._weekCalendarStyles = {\n      style: {}\n    };\n    _this.wrapper = undefined;\n    _this.calendar = undefined;\n    _this.visibleMonth = _this.getMonth(_this.props.context.date);\n    _this.initialDate = props.context.date;\n    _this.headerStyleOverride = {\n      'stylesheet.calendar.header': {\n        week: {\n          marginTop: 7,\n          marginBottom: -4,\n          flexDirection: 'row',\n          justifyContent: 'space-around'\n        }\n      }\n    };\n    _this.state = {\n      deltaY: new Animated.Value(startHeight),\n      headerDeltaY: new Animated.Value(props.initialPosition === POSITIONS.CLOSED ? 0 : -HEADER_HEIGHT),\n      position: props.initialPosition,\n      screenReaderEnabled: false\n    };\n    _this.panResponder = PanResponder.create({\n      onMoveShouldSetPanResponder: _this.handleMoveShouldSetPanResponder,\n      onPanResponderGrant: _this.handlePanResponderGrant,\n      onPanResponderMove: _this.handlePanResponderMove,\n      onPanResponderRelease: _this.handlePanResponderEnd,\n      onPanResponderTerminate: _this.handlePanResponderEnd\n    });\n    return _this;\n  }\n\n  _createClass(ExpandableCalendar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (AccessibilityInfo) {\n        if (AccessibilityInfo.isScreenReaderEnabled) {\n          AccessibilityInfo.isScreenReaderEnabled().then(this.handleScreenReaderStatus);\n        } else if (AccessibilityInfo.fetch) {\n          AccessibilityInfo.fetch().then(this.handleScreenReaderStatus);\n        }\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var date = this.props.context.date;\n\n      if (date !== prevProps.context.date) {\n        this.scrollToDate(date);\n      }\n    }\n  }, {\n    key: \"updateNativeStyles\",\n    value: function updateNativeStyles() {\n      this.wrapper && this.wrapper.setNativeProps(this._wrapperStyles);\n\n      if (!this.props.horizontal) {\n        this.header && this.header.setNativeProps(this._headerStyles);\n      } else {\n        this.weekCalendar && this.weekCalendar.setNativeProps(this._weekCalendarStyles);\n      }\n    }\n  }, {\n    key: \"scrollToDate\",\n    value: function scrollToDate(date) {\n      if (this.calendar) {\n        if (!this.props.horizontal) {\n          this.calendar.scrollToDay(XDate(date), 0, true);\n        } else if (this.getMonth(date) !== this.visibleMonth) {\n          this.calendar.scrollToMonth(XDate(date));\n        }\n      }\n    }\n  }, {\n    key: \"scrollPage\",\n    value: function scrollPage(next) {\n      if (this.props.horizontal) {\n        var d = parseDate(this.props.context.date);\n\n        if (this.state.position === POSITIONS.OPEN) {\n          d.setDate(1);\n          d.addMonths(next ? 1 : -1);\n        } else {\n          var firstDay = this.props.firstDay;\n          var dayOfTheWeek = d.getDay();\n\n          if (dayOfTheWeek < firstDay && firstDay > 0) {\n            dayOfTheWeek = 7 + dayOfTheWeek;\n          }\n\n          var firstDayOfWeek = (next ? 7 : -7) - dayOfTheWeek + firstDay;\n          d.addDays(firstDayOfWeek);\n        }\n\n        _.invoke(this.props.context, 'setDate', this.getDateString(d), UPDATE_SOURCES.PAGE_SCROLL);\n      }\n    }\n  }, {\n    key: \"getOpenHeight\",\n    value: function getOpenHeight() {\n      if (!this.props.horizontal) {\n        return Math.max(commons.screenHeight, commons.screenWidth);\n      }\n\n      return CLOSED_HEIGHT + WEEK_HEIGHT * (this.numberOfWeeks - 1) + (this.props.hideKnob ? 12 : KNOB_CONTAINER_HEIGHT);\n    }\n  }, {\n    key: \"getDateString\",\n    value: function getDateString(date) {\n      return date.toString('yyyy-MM-dd');\n    }\n  }, {\n    key: \"getYear\",\n    value: function getYear(date) {\n      var d = XDate(date);\n      return d.getFullYear();\n    }\n  }, {\n    key: \"getMonth\",\n    value: function getMonth(date) {\n      var d = XDate(date);\n      return d.getMonth() + 1;\n    }\n  }, {\n    key: \"getNumberOfWeeksInMonth\",\n    value: function getNumberOfWeeksInMonth(month) {\n      var days = dateutils.page(month, this.props.firstDay);\n      return days.length / 7;\n    }\n  }, {\n    key: \"getMarkedDates\",\n    value: function getMarkedDates() {\n      var _this$props = this.props,\n          context = _this$props.context,\n          markedDates = _this$props.markedDates;\n\n      if (markedDates) {\n        var marked = _.cloneDeep(markedDates);\n\n        if (marked[context.date]) {\n          marked[context.date].selected = true;\n        } else {\n          marked[context.date] = {\n            selected: true\n          };\n        }\n\n        return marked;\n      }\n\n      return _defineProperty({}, context.date, {\n        selected: true\n      });\n    }\n  }, {\n    key: \"shouldHideArrows\",\n    value: function shouldHideArrows() {\n      if (!this.props.horizontal) {\n        return true;\n      }\n\n      return this.props.hideArrows || false;\n    }\n  }, {\n    key: \"isLaterDate\",\n    value: function isLaterDate(date1, date2) {\n      if (date1.year > this.getYear(date2)) {\n        return true;\n      }\n\n      if (date1.year === this.getYear(date2)) {\n        if (date1.month > this.getMonth(date2)) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"bounceToPosition\",\n    value: function bounceToPosition(toValue) {\n      if (!this.props.disablePan) {\n        var deltaY = this.state.deltaY;\n        var threshold = this.openHeight / 1.75;\n        var isOpen = this._height >= threshold;\n        var newValue = isOpen ? this.openHeight : this.closedHeight;\n        deltaY.setValue(this._height);\n        this._height = toValue || newValue;\n        isOpen = this._height >= threshold;\n        Animated.spring(deltaY, {\n          toValue: this._height,\n          speed: SPEED,\n          bounciness: BOUNCINESS,\n          useNativeDriver: false\n        }).start(this.onAnimatedFinished);\n\n        _.invoke(this.props, 'onCalendarToggled', isOpen);\n\n        this.setPosition();\n        this.closeHeader(isOpen);\n        this.resetWeekCalendarOpacity(isOpen);\n      }\n    }\n  }, {\n    key: \"setPosition\",\n    value: function setPosition() {\n      var isClosed = this._height === this.closedHeight;\n      this.setState({\n        position: isClosed ? POSITIONS.CLOSED : POSITIONS.OPEN\n      });\n    }\n  }, {\n    key: \"resetWeekCalendarOpacity\",\n    value: function resetWeekCalendarOpacity(isOpen) {\n      this._weekCalendarStyles.style.opacity = isOpen ? 0 : 1;\n      this.updateNativeStyles();\n    }\n  }, {\n    key: \"closeHeader\",\n    value: function closeHeader(isOpen) {\n      var headerDeltaY = this.state.headerDeltaY;\n      headerDeltaY.setValue(this._headerStyles.style.top);\n\n      if (!this.props.horizontal && !isOpen) {\n        Animated.spring(headerDeltaY, {\n          toValue: 0,\n          speed: SPEED / 10,\n          bounciness: 1,\n          useNativeDriver: false\n        }).start();\n      }\n    }\n  }, {\n    key: \"renderWeekDaysNames\",\n    value: function renderWeekDaysNames() {\n      var _this2 = this;\n\n      var weekDaysNames = dateutils.weekDayNames(this.props.firstDay);\n      return React.createElement(View, {\n        style: [this.style.weekDayNames, {\n          paddingLeft: _.get(this.props, 'calendarStyle.paddingLeft') + 6 || DAY_NAMES_PADDING,\n          paddingRight: _.get(this.props, 'calendarStyle.paddingRight') + 6 || DAY_NAMES_PADDING\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 7\n        }\n      }, weekDaysNames.map(function (day, index) {\n        return React.createElement(Text, {\n          allowFontScaling: false,\n          key: day + index,\n          style: _this2.style.weekday,\n          numberOfLines: 1,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 11\n          }\n        }, day);\n      }));\n    }\n  }, {\n    key: \"renderHeader\",\n    value: function renderHeader() {\n      var _this3 = this;\n\n      var monthYear = XDate(this.props.context.date).toString('MMMM yyyy');\n      return React.createElement(Animated.View, {\n        ref: function ref(e) {\n          return _this3.header = e;\n        },\n        style: [this.style.header, {\n          height: HEADER_HEIGHT,\n          top: this.state.headerDeltaY\n        }],\n        pointerEvents: 'none',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 7\n        }\n      }, React.createElement(Text, {\n        allowFontScaling: false,\n        style: this.style.headerTitle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 9\n        }\n      }, monthYear), this.renderWeekDaysNames());\n    }\n  }, {\n    key: \"renderWeekCalendar\",\n    value: function renderWeekCalendar() {\n      var _this4 = this;\n\n      var position = this.state.position;\n      var disableWeekScroll = this.props.disableWeekScroll;\n      var WeekComponent = disableWeekScroll ? Week : WeekCalendar;\n      return React.createElement(Animated.View, {\n        ref: function ref(e) {\n          return _this4.weekCalendar = e;\n        },\n        style: {\n          position: 'absolute',\n          left: 0,\n          right: 0,\n          top: HEADER_HEIGHT + (commons.isAndroid ? 8 : 4),\n          opacity: position === POSITIONS.OPEN ? 0 : 1\n        },\n        pointerEvents: position === POSITIONS.CLOSED ? 'auto' : 'none',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 7\n        }\n      }, React.createElement(WeekComponent, _extends({}, this.props, {\n        current: this.props.context.date,\n        onDayPress: this.onDayPress,\n        markedDates: this.getMarkedDates(),\n        style: this.props.calendarStyle,\n        allowShadow: false,\n        hideDayNames: true,\n        accessibilityElementsHidden: true,\n        importantForAccessibility: 'no-hide-descendants',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 9\n        }\n      })));\n    }\n  }, {\n    key: \"renderKnob\",\n    value: function renderKnob() {\n      return React.createElement(View, {\n        style: this.style.knobContainer,\n        pointerEvents: 'none',\n        testID: this.props.testID + \"-knob\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: this.style.knob,\n        testID: CALENDAR_KNOB,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 9\n        }\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var _this$props2 = this.props,\n          style = _this$props2.style,\n          hideKnob = _this$props2.hideKnob,\n          horizontal = _this$props2.horizontal,\n          allowShadow = _this$props2.allowShadow,\n          theme = _this$props2.theme,\n          others = _objectWithoutProperties(_this$props2, [\"style\", \"hideKnob\", \"horizontal\", \"allowShadow\", \"theme\"]);\n\n      var _this$state = this.state,\n          deltaY = _this$state.deltaY,\n          position = _this$state.position,\n          screenReaderEnabled = _this$state.screenReaderEnabled;\n      var isOpen = position === POSITIONS.OPEN;\n\n      var themeObject = _extends(this.headerStyleOverride, theme);\n\n      return React.createElement(View, {\n        testID: this.props.testID,\n        style: [allowShadow && this.style.containerShadow, style],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 7\n        }\n      }, screenReaderEnabled ? React.createElement(Calendar, _extends({\n        testID: \"calendar\"\n      }, others, {\n        theme: themeObject,\n        onDayPress: this.onDayPress,\n        markedDates: this.getMarkedDates(),\n        hideExtraDays: true,\n        renderArrow: this.renderArrow,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 11\n        }\n      })) : React.createElement(Animated.View, _extends({\n        ref: function ref(e) {\n          _this5.wrapper = e;\n        },\n        style: {\n          height: deltaY\n        }\n      }, this.panResponder.panHandlers, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 11\n        }\n      }), React.createElement(CalendarList, _extends({\n        testID: \"calendar\",\n        horizontal: horizontal\n      }, others, {\n        theme: themeObject,\n        ref: function ref(r) {\n          return _this5.calendar = r;\n        },\n        current: this.initialDate,\n        onDayPress: this.onDayPress,\n        onVisibleMonthsChange: this.onVisibleMonthsChange,\n        pagingEnabled: true,\n        scrollEnabled: isOpen,\n        markedDates: this.getMarkedDates(),\n        hideArrows: this.shouldHideArrows(),\n        onPressArrowLeft: this.onPressArrowLeft,\n        onPressArrowRight: this.onPressArrowRight,\n        hideExtraDays: !horizontal,\n        renderArrow: this.renderArrow,\n        staticHeader: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 13\n        }\n      })), horizontal && this.renderWeekCalendar(), !hideKnob && this.renderKnob(), !horizontal && this.renderHeader()));\n    }\n  }]);\n\n  return ExpandableCalendar;\n}(Component);\n\nExpandableCalendar.displayName = 'ExpandableCalendar';\nExpandableCalendar.propTypes = _objectSpread(_objectSpread({}, CalendarList.propTypes), {}, {\n  initialPosition: PropTypes.oneOf(_.values(POSITIONS)),\n  onCalendarToggled: PropTypes.func,\n  disablePan: PropTypes.bool,\n  hideKnob: PropTypes.bool,\n  leftArrowImageSource: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.func]),\n  rightArrowImageSource: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.func]),\n  allowShadow: PropTypes.bool,\n  disableWeekScroll: PropTypes.bool\n});\nExpandableCalendar.defaultProps = {\n  horizontal: true,\n  initialPosition: POSITIONS.CLOSED,\n  firstDay: 0,\n  leftArrowImageSource: require(\"../calendar/img/previous.png\"),\n  rightArrowImageSource: require(\"../calendar/img/next.png\"),\n  allowShadow: true\n};\nExpandableCalendar.positions = POSITIONS;\nexport default asCalendarConsumer(ExpandableCalendar);","map":{"version":3,"sources":["D:/Work/App-Zip/node_modules/react-native-calendars/src/expandableCalendar/index.js"],"names":["_","React","Component","PropTypes","XDate","CALENDAR_KNOB","dateutils","parseDate","styleConstructor","CalendarList","Calendar","asCalendarConsumer","WeekCalendar","Week","commons","require","UPDATE_SOURCES","POSITIONS","CLOSED","OPEN","SPEED","BOUNCINESS","CLOSED_HEIGHT","WEEK_HEIGHT","KNOB_CONTAINER_HEIGHT","HEADER_HEIGHT","DAY_NAMES_PADDING","ExpandableCalendar","props","handleScreenReaderStatus","screenReaderEnabled","setState","handleMoveShouldSetPanResponder","e","gestureState","disablePan","horizontal","state","position","dy","handlePanResponderGrant","handlePanResponderMove","_wrapperStyles","style","height","Math","max","closedHeight","_height","_headerStyles","top","min","_weekCalendarStyles","opacity","updateNativeStyles","handlePanResponderEnd","bounceToPosition","onAnimatedFinished","finished","onPressArrowLeft","scrollPage","onPressArrowRight","onDayPress","value","invoke","context","dateString","DAY_PRESS","setTimeout","onVisibleMonthsChange","visibleMonth","first","month","date","updateSource","getMonth","next","isLaterDate","numberOfWeeks","getNumberOfWeeksInMonth","openHeight","getOpenHeight","renderArrow","direction","isFunction","rightArrowImageSource","leftArrowImageSource","arrowImage","testID","theme","hideKnob","startHeight","initialPosition","wrapper","undefined","calendar","initialDate","headerStyleOverride","week","marginTop","marginBottom","flexDirection","justifyContent","deltaY","Animated","Value","headerDeltaY","panResponder","PanResponder","create","onMoveShouldSetPanResponder","onPanResponderGrant","onPanResponderMove","onPanResponderRelease","onPanResponderTerminate","AccessibilityInfo","isScreenReaderEnabled","then","fetch","prevProps","scrollToDate","setNativeProps","header","weekCalendar","scrollToDay","scrollToMonth","d","setDate","addMonths","firstDay","dayOfTheWeek","getDay","firstDayOfWeek","addDays","getDateString","PAGE_SCROLL","screenHeight","screenWidth","toString","getFullYear","days","page","length","markedDates","marked","cloneDeep","selected","hideArrows","date1","date2","year","getYear","toValue","threshold","isOpen","newValue","setValue","spring","speed","bounciness","useNativeDriver","start","setPosition","closeHeader","resetWeekCalendarOpacity","isClosed","weekDaysNames","weekDayNames","paddingLeft","get","paddingRight","map","day","index","weekday","monthYear","headerTitle","renderWeekDaysNames","disableWeekScroll","WeekComponent","left","right","isAndroid","getMarkedDates","calendarStyle","knobContainer","knob","allowShadow","others","themeObject","containerShadow","panHandlers","r","shouldHideArrows","renderWeekCalendar","renderKnob","renderHeader","displayName","propTypes","oneOf","values","onCalendarToggled","func","bool","oneOfType","object","number","defaultProps","positions"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport React, {Component} from 'react';\nimport {AccessibilityInfo, PanResponder, Animated, View, Text, Image} from 'react-native';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport {CALENDAR_KNOB} from '../testIDs';\n\nimport dateutils from '../dateutils';\nimport {parseDate} from '../interface';\nimport styleConstructor from './style';\nimport CalendarList from '../calendar-list';\nimport Calendar from '../calendar';\nimport asCalendarConsumer from './asCalendarConsumer';\nimport WeekCalendar from './weekCalendar';\nimport Week from './week';\n\nconst commons = require('./commons');\nconst UPDATE_SOURCES = commons.UPDATE_SOURCES;\nconst POSITIONS = {\n  CLOSED: 'closed',\n  OPEN: 'open'\n};\nconst SPEED = 20;\nconst BOUNCINESS = 6;\nconst CLOSED_HEIGHT = 120; // header + 1 week\nconst WEEK_HEIGHT = 46;\nconst KNOB_CONTAINER_HEIGHT = 20;\nconst HEADER_HEIGHT = 68;\nconst DAY_NAMES_PADDING = 24;\n\n/**\n * @description: Expandable calendar component\n * @note: Should be wrapped with 'CalendarProvider'\n * @extends: CalendarList\n * @extendslink: docs/CalendarList\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nclass ExpandableCalendar extends Component {\n  static displayName = 'ExpandableCalendar';\n\n  static propTypes = {\n    ...CalendarList.propTypes,\n    /** the initial position of the calendar ('open' or 'closed') */\n    initialPosition: PropTypes.oneOf(_.values(POSITIONS)),\n    /** callback that fires when the calendar is opened or closed */\n    onCalendarToggled: PropTypes.func,\n    /** an option to disable the pan gesture and disable the opening and closing of the calendar (initialPosition will persist)*/\n    disablePan: PropTypes.bool,\n    /** whether to hide the knob  */\n    hideKnob: PropTypes.bool,\n    /** source for the left arrow image */\n    leftArrowImageSource: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.func]),\n    /** source for the right arrow image */\n    rightArrowImageSource: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.func]),\n    /** whether to have shadow/elevation for the calendar */\n    allowShadow: PropTypes.bool,\n    /** whether to disable the week scroll in closed position */\n    disableWeekScroll: PropTypes.bool\n  };\n\n  static defaultProps = {\n    horizontal: true,\n    initialPosition: POSITIONS.CLOSED,\n    firstDay: 0,\n    leftArrowImageSource: require('../calendar/img/previous.png'),\n    rightArrowImageSource: require('../calendar/img/next.png'),\n    allowShadow: true\n  };\n\n  static positions = POSITIONS;\n\n  constructor(props) {\n    super(props);\n\n    this.style = styleConstructor(props.theme);\n    this.closedHeight = CLOSED_HEIGHT + (props.hideKnob ? 0 : KNOB_CONTAINER_HEIGHT);\n    this.numberOfWeeks = this.getNumberOfWeeksInMonth(XDate(this.props.context.date));\n    this.openHeight = this.getOpenHeight();\n\n    const startHeight = props.initialPosition === POSITIONS.CLOSED ? this.closedHeight : this.openHeight;\n    this._height = startHeight;\n    this._wrapperStyles = {style: {height: startHeight}};\n    this._headerStyles = {style: {top: props.initialPosition === POSITIONS.CLOSED ? 0 : -HEADER_HEIGHT}};\n    this._weekCalendarStyles = {style: {}};\n    this.wrapper = undefined;\n    this.calendar = undefined;\n    this.visibleMonth = this.getMonth(this.props.context.date);\n    this.initialDate = props.context.date; // should be set only once!!!\n    this.headerStyleOverride = {\n      'stylesheet.calendar.header': {\n        week: {\n          marginTop: 7,\n          marginBottom: -4, // reduce space between dayNames and first line of dates\n          flexDirection: 'row',\n          justifyContent: 'space-around'\n        }\n      }\n    };\n\n    this.state = {\n      deltaY: new Animated.Value(startHeight),\n      headerDeltaY: new Animated.Value(props.initialPosition === POSITIONS.CLOSED ? 0 : -HEADER_HEIGHT),\n      position: props.initialPosition,\n      screenReaderEnabled: false\n    };\n\n    this.panResponder = PanResponder.create({\n      onMoveShouldSetPanResponder: this.handleMoveShouldSetPanResponder,\n      onPanResponderGrant: this.handlePanResponderGrant,\n      onPanResponderMove: this.handlePanResponderMove,\n      onPanResponderRelease: this.handlePanResponderEnd,\n      onPanResponderTerminate: this.handlePanResponderEnd\n    });\n  }\n\n  componentDidMount() {\n    if (AccessibilityInfo) {\n      if (AccessibilityInfo.isScreenReaderEnabled) {\n        AccessibilityInfo.isScreenReaderEnabled().then(this.handleScreenReaderStatus);\n      } else if (AccessibilityInfo.fetch) {\n        // Support for older RN versions\n        AccessibilityInfo.fetch().then(this.handleScreenReaderStatus);\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const {date} = this.props.context;\n    if (date !== prevProps.context.date) {\n      // date was changed from AgendaList, arrows or scroll\n      this.scrollToDate(date);\n    }\n  }\n\n  handleScreenReaderStatus = screenReaderEnabled => {\n    this.setState({screenReaderEnabled});\n  };\n\n  updateNativeStyles() {\n    this.wrapper && this.wrapper.setNativeProps(this._wrapperStyles);\n    if (!this.props.horizontal) {\n      this.header && this.header.setNativeProps(this._headerStyles);\n    } else {\n      this.weekCalendar && this.weekCalendar.setNativeProps(this._weekCalendarStyles);\n    }\n  }\n\n  /** Scroll */\n\n  scrollToDate(date) {\n    if (this.calendar) {\n      if (!this.props.horizontal) {\n        this.calendar.scrollToDay(XDate(date), 0, true);\n      } else if (this.getMonth(date) !== this.visibleMonth) {\n        // don't scroll if the month is already visible\n        this.calendar.scrollToMonth(XDate(date));\n      }\n    }\n  }\n\n  scrollPage(next) {\n    if (this.props.horizontal) {\n      const d = parseDate(this.props.context.date);\n\n      if (this.state.position === POSITIONS.OPEN) {\n        d.setDate(1);\n        d.addMonths(next ? 1 : -1);\n      } else {\n        const {firstDay} = this.props;\n        let dayOfTheWeek = d.getDay();\n        if (dayOfTheWeek < firstDay && firstDay > 0) {\n          dayOfTheWeek = 7 + dayOfTheWeek;\n        }\n        const firstDayOfWeek = (next ? 7 : -7) - dayOfTheWeek + firstDay;\n        d.addDays(firstDayOfWeek);\n      }\n      _.invoke(this.props.context, 'setDate', this.getDateString(d), UPDATE_SOURCES.PAGE_SCROLL);\n    }\n  }\n\n  /** Utils */\n  getOpenHeight() {\n    if (!this.props.horizontal) {\n      return Math.max(commons.screenHeight, commons.screenWidth);\n    }\n    return CLOSED_HEIGHT + WEEK_HEIGHT * (this.numberOfWeeks - 1) + (this.props.hideKnob ? 12 : KNOB_CONTAINER_HEIGHT);\n  }\n\n  getDateString(date) {\n    return date.toString('yyyy-MM-dd');\n  }\n\n  getYear(date) {\n    const d = XDate(date);\n    return d.getFullYear();\n  }\n\n  getMonth(date) {\n    const d = XDate(date);\n    // getMonth() returns the month of the year (0-11). Value is zero-index, meaning Jan=0, Feb=1, Mar=2, etc.\n    return d.getMonth() + 1;\n  }\n\n  getNumberOfWeeksInMonth(month) {\n    const days = dateutils.page(month, this.props.firstDay);\n    return days.length / 7;\n  }\n\n  getMarkedDates() {\n    const {context, markedDates} = this.props;\n\n    if (markedDates) {\n      const marked = _.cloneDeep(markedDates);\n      if (marked[context.date]) {\n        marked[context.date].selected = true;\n      } else {\n        marked[context.date] = {selected: true};\n      }\n      return marked;\n    }\n    return {[context.date]: {selected: true}};\n  }\n\n  shouldHideArrows() {\n    if (!this.props.horizontal) {\n      return true;\n    }\n    return this.props.hideArrows || false;\n  }\n\n  isLaterDate(date1, date2) {\n    if (date1.year > this.getYear(date2)) {\n      return true;\n    }\n    if (date1.year === this.getYear(date2)) {\n      if (date1.month > this.getMonth(date2)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /** Pan Gesture */\n\n  handleMoveShouldSetPanResponder = (e, gestureState) => {\n    if (this.props.disablePan) {\n      return false;\n    }\n    if (!this.props.horizontal && this.state.position === POSITIONS.OPEN) {\n      // disable pan detection when vertical calendar is open to allow calendar scroll\n      return false;\n    }\n    if (this.state.position === POSITIONS.CLOSED && gestureState.dy < 0) {\n      // disable pan detection to limit to closed height\n      return false;\n    }\n    return gestureState.dy > 5 || gestureState.dy < -5;\n  };\n  handlePanResponderGrant = () => {};\n  handlePanResponderMove = (e, gestureState) => {\n    // limit min height to closed height\n    this._wrapperStyles.style.height = Math.max(this.closedHeight, this._height + gestureState.dy);\n\n    if (!this.props.horizontal) {\n      // vertical CalenderList header\n      this._headerStyles.style.top = Math.min(Math.max(-gestureState.dy, -HEADER_HEIGHT), 0);\n    } else {\n      // horizontal Week view\n      if (this.state.position === POSITIONS.CLOSED) {\n        this._weekCalendarStyles.style.opacity = Math.min(1, Math.max(1 - gestureState.dy / 100, 0));\n      }\n    }\n\n    this.updateNativeStyles();\n  };\n  handlePanResponderEnd = () => {\n    this._height = this._wrapperStyles.style.height;\n    this.bounceToPosition();\n  };\n\n  /** Animated */\n\n  bounceToPosition(toValue) {\n    if (!this.props.disablePan) {\n      const {deltaY} = this.state;\n      const threshold = this.openHeight / 1.75;\n\n      let isOpen = this._height >= threshold;\n      const newValue = isOpen ? this.openHeight : this.closedHeight;\n\n      deltaY.setValue(this._height); // set the start position for the animated value\n      this._height = toValue || newValue;\n      isOpen = this._height >= threshold; // re-check after this._height was set\n\n      Animated.spring(deltaY, {\n        toValue: this._height,\n        speed: SPEED,\n        bounciness: BOUNCINESS,\n        useNativeDriver: false\n      }).start(this.onAnimatedFinished);\n\n      _.invoke(this.props, 'onCalendarToggled', isOpen);\n\n      this.setPosition();\n      this.closeHeader(isOpen);\n      this.resetWeekCalendarOpacity(isOpen);\n    }\n  }\n\n  onAnimatedFinished = ({finished}) => {\n    if (finished) {\n      // this.setPosition();\n    }\n  };\n\n  setPosition() {\n    const isClosed = this._height === this.closedHeight;\n    this.setState({position: isClosed ? POSITIONS.CLOSED : POSITIONS.OPEN});\n  }\n\n  resetWeekCalendarOpacity(isOpen) {\n    this._weekCalendarStyles.style.opacity = isOpen ? 0 : 1;\n    this.updateNativeStyles();\n  }\n\n  closeHeader(isOpen) {\n    const {headerDeltaY} = this.state;\n\n    headerDeltaY.setValue(this._headerStyles.style.top); // set the start position for the animated value\n\n    if (!this.props.horizontal && !isOpen) {\n      Animated.spring(headerDeltaY, {\n        toValue: 0,\n        speed: SPEED / 10,\n        bounciness: 1,\n        useNativeDriver: false\n      }).start();\n    }\n  }\n\n  /** Events */\n\n  onPressArrowLeft = () => {\n    this.scrollPage(false);\n  };\n\n  onPressArrowRight = () => {\n    this.scrollPage(true);\n  };\n\n  onDayPress = value => {\n    // {year: 2019, month: 4, day: 22, timestamp: 1555977600000, dateString: \"2019-04-23\"}\n    _.invoke(this.props.context, 'setDate', value.dateString, UPDATE_SOURCES.DAY_PRESS);\n\n    setTimeout(() => {\n      // to allows setDate to be completed\n      if (this.state.position === POSITIONS.OPEN) {\n        this.bounceToPosition(this.closedHeight);\n      }\n    }, 0);\n  };\n\n  onVisibleMonthsChange = value => {\n    if (this.visibleMonth !== _.first(value).month) {\n      this.visibleMonth = _.first(value).month; // equivalent to this.getMonth(value[0].dateString)\n\n      // for horizontal scroll\n      const {date, updateSource} = this.props.context;\n\n      if (this.visibleMonth !== this.getMonth(date) && updateSource !== UPDATE_SOURCES.DAY_PRESS) {\n        const next = this.isLaterDate(_.first(value), date);\n        this.scrollPage(next);\n      }\n\n      // updating openHeight\n      setTimeout(() => {\n        // to wait for setDate() call in horizontal scroll (this.scrollPage())\n        const numberOfWeeks = this.getNumberOfWeeksInMonth(parseDate(this.props.context.date));\n        if (numberOfWeeks !== this.numberOfWeeks) {\n          this.numberOfWeeks = numberOfWeeks;\n          this.openHeight = this.getOpenHeight();\n          if (this.state.position === POSITIONS.OPEN) {\n            this.bounceToPosition(this.openHeight);\n          }\n        }\n      }, 0);\n    }\n  };\n\n  /** Renders */\n\n  renderWeekDaysNames() {\n    const weekDaysNames = dateutils.weekDayNames(this.props.firstDay);\n\n    return (\n      <View\n        style={[\n          this.style.weekDayNames,\n          {\n            paddingLeft: _.get(this.props, 'calendarStyle.paddingLeft') + 6 || DAY_NAMES_PADDING,\n            paddingRight: _.get(this.props, 'calendarStyle.paddingRight') + 6 || DAY_NAMES_PADDING\n          }\n        ]}\n      >\n        {weekDaysNames.map((day, index) => (\n          <Text allowFontScaling={false} key={day + index} style={this.style.weekday} numberOfLines={1}>\n            {day}\n          </Text>\n        ))}\n      </View>\n    );\n  }\n\n  renderHeader() {\n    const monthYear = XDate(this.props.context.date).toString('MMMM yyyy');\n\n    return (\n      <Animated.View\n        ref={e => (this.header = e)}\n        style={[this.style.header, {height: HEADER_HEIGHT, top: this.state.headerDeltaY}]}\n        pointerEvents={'none'}\n      >\n        <Text allowFontScaling={false} style={this.style.headerTitle}>\n          {monthYear}\n        </Text>\n        {this.renderWeekDaysNames()}\n      </Animated.View>\n    );\n  }\n\n  renderWeekCalendar() {\n    const {position} = this.state;\n    const {disableWeekScroll} = this.props;\n    const WeekComponent = disableWeekScroll ? Week : WeekCalendar;\n\n    return (\n      <Animated.View\n        ref={e => (this.weekCalendar = e)}\n        style={{\n          position: 'absolute',\n          left: 0,\n          right: 0,\n          top: HEADER_HEIGHT + (commons.isAndroid ? 8 : 4), // align row on top of calendar's first row\n          opacity: position === POSITIONS.OPEN ? 0 : 1\n        }}\n        pointerEvents={position === POSITIONS.CLOSED ? 'auto' : 'none'}\n      >\n        <WeekComponent\n          {...this.props}\n          current={this.props.context.date}\n          onDayPress={this.onDayPress}\n          markedDates={this.getMarkedDates()} // for Week component\n          style={this.props.calendarStyle}\n          allowShadow={false}\n          hideDayNames={true}\n          accessibilityElementsHidden // iOS\n          importantForAccessibility={'no-hide-descendants'} // Android\n        />\n      </Animated.View>\n    );\n  }\n\n  renderKnob() {\n    // TODO: turn to TouchableOpacity with onPress that closes it\n    return (\n      <View style={this.style.knobContainer} pointerEvents={'none'} testID={`${this.props.testID}-knob`}>\n        <View style={this.style.knob} testID={CALENDAR_KNOB} />\n      </View>\n    );\n  }\n\n  renderArrow = direction => {\n    if (_.isFunction(this.props.renderArrow)) {\n      return this.props.renderArrow(direction);\n    }\n\n    return (\n      <Image\n        source={direction === 'right' ? this.props.rightArrowImageSource : this.props.leftArrowImageSource}\n        style={this.style.arrowImage}\n        testID={`${this.props.testID}-${direction}-arrow`}\n      />\n    );\n  };\n\n  render() {\n    const {style, hideKnob, horizontal, allowShadow, theme, ...others} = this.props;\n    const {deltaY, position, screenReaderEnabled} = this.state;\n    const isOpen = position === POSITIONS.OPEN;\n    const themeObject = Object.assign(this.headerStyleOverride, theme);\n\n    return (\n      <View testID={this.props.testID} style={[allowShadow && this.style.containerShadow, style]}>\n        {screenReaderEnabled ? (\n          <Calendar\n            testID=\"calendar\"\n            {...others}\n            theme={themeObject}\n            onDayPress={this.onDayPress}\n            markedDates={this.getMarkedDates()}\n            hideExtraDays\n            renderArrow={this.renderArrow}\n          />\n        ) : (\n          <Animated.View\n            ref={e => {\n              this.wrapper = e;\n            }}\n            style={{height: deltaY}}\n            {...this.panResponder.panHandlers}\n          >\n            <CalendarList\n              testID=\"calendar\"\n              horizontal={horizontal}\n              {...others}\n              theme={themeObject}\n              ref={r => (this.calendar = r)}\n              current={this.initialDate}\n              onDayPress={this.onDayPress}\n              onVisibleMonthsChange={this.onVisibleMonthsChange}\n              pagingEnabled\n              scrollEnabled={isOpen}\n              markedDates={this.getMarkedDates()}\n              hideArrows={this.shouldHideArrows()}\n              onPressArrowLeft={this.onPressArrowLeft}\n              onPressArrowRight={this.onPressArrowRight}\n              hideExtraDays={!horizontal}\n              renderArrow={this.renderArrow}\n              staticHeader\n            />\n            {horizontal && this.renderWeekCalendar()}\n            {!hideKnob && this.renderKnob()}\n            {!horizontal && this.renderHeader()}\n          </Animated.View>\n        )}\n      </View>\n    );\n  }\n}\n\nexport default asCalendarConsumer(ExpandableCalendar);\n"]},"metadata":{},"sourceType":"module"}