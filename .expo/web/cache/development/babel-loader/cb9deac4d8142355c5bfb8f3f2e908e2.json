{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"D:\\\\Work\\\\App-Zip\\\\node_modules\\\\react-native-calendars\\\\src\\\\timeline\\\\Timeline.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport styleConstructor from \"./style\";\nimport populateEvents from \"./Packer\";\nvar LEFT_MARGIN = 60 - 1;\nvar TEXT_LINE_HEIGHT = 17;\n\nfunction range(from, to) {\n  return Array.from(Array(to), function (_, i) {\n    return from + i;\n  });\n}\n\nvar _Dimensions$get = Dimensions.get('window'),\n    dimensionWidth = _Dimensions$get.width;\n\nvar Timeline = function (_React$PureComponent) {\n  _inherits(Timeline, _React$PureComponent);\n\n  var _super = _createSuper(Timeline);\n\n  function Timeline(props) {\n    var _this;\n\n    _classCallCheck(this, Timeline);\n\n    _this = _super.call(this, props);\n    var _this$props = _this.props,\n        start = _this$props.start,\n        end = _this$props.end;\n    _this.calendarHeight = (end - start) * 100;\n    _this.style = styleConstructor(props.styles, _this.calendarHeight);\n    var width = dimensionWidth - LEFT_MARGIN;\n    var packedEvents = populateEvents(props.events, width, start);\n    var initPosition = _.min(_.map(packedEvents, 'top')) - _this.calendarHeight / (end - start);\n    var verifiedInitPosition = initPosition < 0 ? 0 : initPosition;\n    _this.state = {\n      _scrollY: verifiedInitPosition,\n      packedEvents: packedEvents\n    };\n    return _this;\n  }\n\n  _createClass(Timeline, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var width = dimensionWidth - LEFT_MARGIN;\n      var prevEvents = prevProps.events,\n          _prevProps$start = prevProps.start,\n          prevStart = _prevProps$start === void 0 ? 0 : _prevProps$start;\n      var _this$props2 = this.props,\n          events = _this$props2.events,\n          _this$props2$start = _this$props2.start,\n          start = _this$props2$start === void 0 ? 0 : _this$props2$start;\n\n      if (prevEvents !== events || prevStart !== start) {\n        this.setState({\n          packedEvents: populateEvents(events, width, start)\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.scrollToFirst && this.scrollToFirst();\n    }\n  }, {\n    key: \"scrollToFirst\",\n    value: function scrollToFirst() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        if (_this2.state && _this2.state._scrollY && _this2._scrollView) {\n          _this2._scrollView.scrollTo({\n            x: 0,\n            y: _this2.state._scrollY,\n            animated: true\n          });\n        }\n      }, 1);\n    }\n  }, {\n    key: \"_renderLines\",\n    value: function _renderLines() {\n      var _this3 = this;\n\n      var _this$props3 = this.props,\n          format24h = _this$props3.format24h,\n          _this$props3$start = _this$props3.start,\n          start = _this$props3$start === void 0 ? 0 : _this$props3$start,\n          _this$props3$end = _this$props3.end,\n          end = _this$props3$end === void 0 ? 24 : _this$props3$end;\n      var offset = this.calendarHeight / (end - start);\n      var EVENT_DIFF = 20;\n      return range(start, end + 1).map(function (i, index) {\n        var timeText;\n\n        if (i === start) {\n          timeText = '';\n        } else if (i < 12) {\n          timeText = !format24h ? i + \" AM\" : i + \":00\";\n        } else if (i === 12) {\n          timeText = !format24h ? i + \" PM\" : i + \":00\";\n        } else if (i === 24) {\n          timeText = !format24h ? '12 AM' : '23:59';\n        } else {\n          timeText = !format24h ? i - 12 + \" PM\" : i + \":00\";\n        }\n\n        return [React.createElement(Text, {\n          key: \"timeLabel\" + i,\n          style: [_this3.style.timeLabel, {\n            top: offset * index - 6\n          }],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 9\n          }\n        }, timeText), i === start ? null : React.createElement(View, {\n          key: \"line\" + i,\n          style: [_this3.style.line, {\n            top: offset * index,\n            width: dimensionWidth - EVENT_DIFF\n          }],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 11\n          }\n        }), React.createElement(View, {\n          key: \"lineHalf\" + i,\n          style: [_this3.style.line, {\n            top: offset * (index + 0.5),\n            width: dimensionWidth - EVENT_DIFF\n          }],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 9\n          }\n        })];\n      });\n    }\n  }, {\n    key: \"_onEventTapped\",\n    value: function _onEventTapped(event) {\n      if (this.props.eventTapped) {\n        this.props.eventTapped(event);\n      }\n    }\n  }, {\n    key: \"_renderEvents\",\n    value: function _renderEvents() {\n      var _this4 = this;\n\n      var packedEvents = this.state.packedEvents;\n      var events = packedEvents.map(function (event, i) {\n        var style = {\n          left: event.left,\n          height: event.height,\n          width: event.width,\n          top: event.top,\n          backgroundColor: event.color ? event.color : '#add8e6'\n        };\n        var numberOfLines = Math.floor(event.height / TEXT_LINE_HEIGHT);\n        var formatTime = _this4.props.format24h ? 'HH:mm' : 'hh:mm A';\n        return React.createElement(TouchableOpacity, {\n          activeOpacity: 0.9,\n          onPress: function onPress() {\n            return _this4._onEventTapped(_this4.props.events[event.index]);\n          },\n          key: i,\n          style: [_this4.style.event, style],\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 9\n          }\n        }, _this4.props.renderEvent ? _this4.props.renderEvent(event) : React.createElement(View, {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }\n        }, React.createElement(Text, {\n          numberOfLines: 1,\n          style: _this4.style.eventTitle,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 15\n          }\n        }, event.title || 'Event'), numberOfLines > 1 ? React.createElement(Text, {\n          numberOfLines: numberOfLines - 1,\n          style: [_this4.style.eventSummary],\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 17\n          }\n        }, event.summary || ' ') : null, numberOfLines > 2 ? React.createElement(Text, {\n          style: _this4.style.eventTimes,\n          numberOfLines: 1,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 17\n          }\n        }, moment(event.start).format(formatTime), \" - \", moment(event.end).format(formatTime)) : null));\n      });\n      return React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: {\n          marginLeft: LEFT_MARGIN\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 9\n        }\n      }, events));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return React.createElement(ScrollView, {\n        ref: function ref(_ref) {\n          return _this5._scrollView = _ref;\n        },\n        contentContainerStyle: [this.style.contentStyle, {\n          width: dimensionWidth\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 7\n        }\n      }, this._renderLines(), this._renderEvents());\n    }\n  }]);\n\n  return Timeline;\n}(React.PureComponent);\n\nTimeline.propTypes = {\n  start: PropTypes.number,\n  end: PropTypes.number,\n  eventTapped: PropTypes.func,\n  format24h: PropTypes.bool,\n  events: PropTypes.arrayOf(PropTypes.shape({\n    start: PropTypes.string.isRequired,\n    end: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    summary: PropTypes.string.isRequired,\n    color: PropTypes.string\n  })).isRequired\n};\nTimeline.defaultProps = {\n  start: 0,\n  end: 24,\n  events: [],\n  format24h: true\n};\nexport { Timeline as default };","map":{"version":3,"sources":["D:/Work/App-Zip/node_modules/react-native-calendars/src/timeline/Timeline.js"],"names":["_","PropTypes","moment","React","styleConstructor","populateEvents","LEFT_MARGIN","TEXT_LINE_HEIGHT","range","from","to","Array","i","Dimensions","get","dimensionWidth","width","Timeline","props","start","end","calendarHeight","style","styles","packedEvents","events","initPosition","min","map","verifiedInitPosition","state","_scrollY","prevProps","prevEvents","prevStart","setState","scrollToFirst","setTimeout","_scrollView","scrollTo","x","y","animated","format24h","offset","EVENT_DIFF","index","timeText","timeLabel","top","line","event","eventTapped","left","height","backgroundColor","color","numberOfLines","Math","floor","formatTime","_onEventTapped","renderEvent","eventTitle","title","eventSummary","summary","eventTimes","format","marginLeft","ref","contentStyle","_renderLines","_renderEvents","PureComponent","propTypes","number","func","bool","arrayOf","shape","string","isRequired","defaultProps"],"mappings":"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","sourcesContent":["// @flow\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport React from 'react';\nimport {View, Text, ScrollView, TouchableOpacity, Dimensions} from 'react-native';\nimport styleConstructor from './style';\nimport populateEvents from './Packer';\n\nconst LEFT_MARGIN = 60 - 1;\nconst TEXT_LINE_HEIGHT = 17;\n\nfunction range(from, to) {\n  return Array.from(Array(to), (_, i) => from + i);\n}\n\nlet {width: dimensionWidth} = Dimensions.get('window');\n\nexport default class Timeline extends React.PureComponent {\n  static propTypes = {\n    start: PropTypes.number,\n    end: PropTypes.number,\n    eventTapped: PropTypes.func,\n    format24h: PropTypes.bool,\n    events: PropTypes.arrayOf(\n      PropTypes.shape({\n        start: PropTypes.string.isRequired,\n        end: PropTypes.string.isRequired,\n        title: PropTypes.string.isRequired,\n        summary: PropTypes.string.isRequired,\n        color: PropTypes.string\n      })\n    ).isRequired\n  };\n\n  static defaultProps = {\n    start: 0,\n    end: 24,\n    events: [],\n    format24h: true\n  };\n\n  constructor(props) {\n    super(props);\n\n    const {start, end} = this.props;\n    this.calendarHeight = (end - start) * 100;\n\n    this.style = styleConstructor(props.styles, this.calendarHeight);\n\n    const width = dimensionWidth - LEFT_MARGIN;\n    const packedEvents = populateEvents(props.events, width, start);\n    let initPosition = _.min(_.map(packedEvents, 'top')) - this.calendarHeight / (end - start);\n    const verifiedInitPosition = initPosition < 0 ? 0 : initPosition;\n\n    this.state = {\n      _scrollY: verifiedInitPosition,\n      packedEvents\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    const width = dimensionWidth - LEFT_MARGIN;\n    const {events: prevEvents, start: prevStart = 0} = prevProps;\n    const {events, start = 0} = this.props;\n\n    if (prevEvents !== events || prevStart !== start) {\n      this.setState({\n        packedEvents: populateEvents(events, width, start)\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.props.scrollToFirst && this.scrollToFirst();\n  }\n\n  scrollToFirst() {\n    setTimeout(() => {\n      if (this.state && this.state._scrollY && this._scrollView) {\n        this._scrollView.scrollTo({\n          x: 0,\n          y: this.state._scrollY,\n          animated: true\n        });\n      }\n    }, 1);\n  }\n\n  _renderLines() {\n    const {format24h, start = 0, end = 24} = this.props;\n    const offset = this.calendarHeight / (end - start);\n    const EVENT_DIFF = 20;\n\n    return range(start, end + 1).map((i, index) => {\n      let timeText;\n      \n      if (i === start) {\n        timeText = '';\n      } else if (i < 12) {\n        timeText = !format24h ? `${i} AM` : `${i}:00`;\n      } else if (i === 12) {\n        timeText = !format24h ? `${i} PM` : `${i}:00`;\n      } else if (i === 24) {\n        timeText = !format24h ? '12 AM' : '23:59';\n      } else {\n        timeText = !format24h ? `${i - 12} PM` : `${i}:00`;\n      }\n\n      return [\n        <Text key={`timeLabel${i}`} style={[this.style.timeLabel, {top: offset * index - 6}]}>\n          {timeText}\n        </Text>,\n        i === start ? null : (\n          <View key={`line${i}`} style={[this.style.line, {top: offset * index, width: dimensionWidth - EVENT_DIFF}]} />\n        ),\n        <View\n          key={`lineHalf${i}`}\n          style={[this.style.line, {top: offset * (index + 0.5), width: dimensionWidth - EVENT_DIFF}]}\n        />\n      ];\n    });\n  }\n\n  _onEventTapped(event) {\n    if (this.props.eventTapped) {\n      this.props.eventTapped(event);\n    }\n  }\n\n  _renderEvents() {\n    const {packedEvents} = this.state;\n    let events = packedEvents.map((event, i) => {\n      const style = {\n        left: event.left,\n        height: event.height,\n        width: event.width,\n        top: event.top,\n        backgroundColor: event.color ? event.color : '#add8e6'\n      };\n\n      // Fixing the number of lines for the event title makes this calculation easier.\n      // However it would make sense to overflow the title to a new line if needed\n      const numberOfLines = Math.floor(event.height / TEXT_LINE_HEIGHT);\n      const formatTime = this.props.format24h ? 'HH:mm' : 'hh:mm A';\n      \n      return (\n        <TouchableOpacity\n          activeOpacity={0.9}\n          onPress={() => this._onEventTapped(this.props.events[event.index])}\n          key={i}\n          style={[this.style.event, style]}\n        >\n          {this.props.renderEvent ? (\n            this.props.renderEvent(event)\n          ) : (\n            <View>\n              <Text numberOfLines={1} style={this.style.eventTitle}>\n                {event.title || 'Event'}\n              </Text>\n              {numberOfLines > 1 ? (\n                <Text numberOfLines={numberOfLines - 1} style={[this.style.eventSummary]}>\n                  {event.summary || ' '}\n                </Text>\n              ) : null}\n              {numberOfLines > 2 ? (\n                <Text style={this.style.eventTimes} numberOfLines={1}>\n                  {moment(event.start).format(formatTime)} - {moment(event.end).format(formatTime)}\n                </Text>\n              ) : null}\n            </View>\n          )}\n        </TouchableOpacity>\n      );\n    });\n\n    return (\n      <View>\n        <View style={{marginLeft: LEFT_MARGIN}}>{events}</View>\n      </View>\n    );\n  }\n\n  render() {\n    return (\n      <ScrollView\n        ref={ref => (this._scrollView = ref)}\n        contentContainerStyle={[this.style.contentStyle, {width: dimensionWidth}]}\n      >\n        {this._renderLines()}\n        {this._renderEvents()}\n      </ScrollView>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}